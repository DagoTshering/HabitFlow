{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="dashboard-header">
  <h2><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h2>
  <div class="date-badge">
    <i class="fas fa-calendar-day me-2"></i>{{ today.strftime("%b %d, %Y") }}
  </div>
</div>

{% if progress %}
<div class="row">
  {% for p in progress %}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card habit-card">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start mb-2">
          <h5 class="card-title">
            <a href="{{ url_for('routes.view_habit', habit_id=p.habit.id) }}" class="text-decoration-none">{{ p.habit.name }}</a>
          </h5>
          <span class="frequency-badge">{{ p.habit.frequency }}</span>
        </div>
        <p class="card-text text-muted small">{{ p.habit.description }}</p>
        
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            {% if p.completed_today %}
              <span class="badge bg-success"><i class="fas fa-check me-1"></i>Done today</span>
            {% else %}
              <span class="badge bg-secondary"><i class="fas fa-clock me-1"></i>Not done</span>
            {% endif %}
          </div>
          <small class="text-muted">Total: {{ p.total }}</small>
        </div>
        
        <div class="habit-actions">
          <form action="{{ url_for('routes.toggle_habit', habit_id=p.habit.id) }}" method="post" class="d-inline">
            <button class="btn btn-sm {% if p.completed_today %}btn-outline-warning{% else %}btn-success{% endif %}" type="submit">
              {% if p.completed_today %}<i class="fas fa-undo me-1"></i>Unmark{% else %}<i class="fas fa-check me-1"></i>Mark Done{% endif %}
            </button>
          </form>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('routes.edit_habit', habit_id=p.habit.id) }}">
            <i class="fas fa-edit me-1"></i>Edit
          </a>
          <form action="{{ url_for('routes.delete_habit', habit_id=p.habit.id) }}" method="post" class="d-inline">
            <button class="btn btn-sm btn-outline-danger" type="submit" onclick="return confirm('Delete this habit?');">
              <i class="fas fa-trash me-1"></i>Delete
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="empty-state">
  <i class="fas fa-clipboard-list fa-3x mb-3"></i>
  <h4>No habits yet</h4>
  <p class="text-muted">Start building good habits by adding your first one!</p>
  <a href="{{ url_for('routes.add_habit') }}" class="btn btn-primary mt-2">
    <i class="fas fa-plus-circle me-2"></i>Add Your First Habit
  </a>
</div>
{% endif %}
{% endblock %}